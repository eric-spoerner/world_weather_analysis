# Vacation recommendations based on weather preferences

## Project description

This repository contains a weather-driven vacation recommendation engine using Google Maps API and Weather API.  Based on a set of 2,000 randomly generated lat/long coordinates, the application identifies the nearest city to each one, extracts current weather details, and then allows a user to plan a vacation in a given country based on weather preferences.

This was originally developed as an assignment for the UC San Diego Data Science and Visualization Boot Camp program and has since been branched/augmented as dcocumented below.

## Tech Resources 
* Anaconda3 (2021.11)
* Jupyter Lab (3.2.1)
* Python (3.7.11)
    * Pandas module (1.3.4)
    * Numpy module (1.20.3)
    * citiPy (0.0.5)
    * matplotlib (3.4.3)
    * requests library (2.26.0)
    * gmaps (0.8.3)
* Visual Studio Code (1.63.2)

## Data Sources

* Weather API from OpenWeather (https://openweathermap.org/api)
* Google Maps APIs (https://developers.google.com/maps)
    * Places
    * Directions
* Country ISO Code Map (https://www.datahub.io/core/country-list)

## Original request

* Script 1 (`weather_database/weather_database.ipynb`):
    * Generate 2k random lat/long coordinates
    * Cross-reference with citypy to identify nearest city.
    * Use weather API to identify current weather in all identified cities and save data to csv (`weather_database/WeatherPy_Database.csv`)
* Script 2 (`vacation_search/Vacation_Search.ipynb`):
    * run cities from weather data CSV through Google Places API
        * identify hotels from each city via API and add hotel name to Pandas dataframe
    * Save updated dataframe with eligible cities for vacation to CSV (`vacation_search/WeatherPy_vacation.csv`)
* Script 3 (`vacation_itinerary/Vacation_Itinerary.ipynb`)
    * Import CSV from step 2 and map out potential destination hotels.
    * User manually identifies four cities in a single country and hard-codes them into script.
    * Call API with four cities to generate itinerary and map.

## Modifications added

* Weather API call:
    * Robust logging for weather API pull
    * Appropriate capitalization for city and country codes pulled from citipy
    * Modified algo to allow for same-named cities in different countries   
* Added data set to map two-digit ISO country code to full country name
* Country/City picker: 
    * Print eligible countries for vacations and prompt user to re-run if none have at least 4 locations.
    * Sanitized inputs for min/max temperature
    * Added robust logging to Google places API hotel search
* Vacation itinerary:
    * Self-guided selection of vacation area using UI inputs rather than hard-coded values:
        * Allow user to pick country for vacation.
        * Allow user to select cities for itinerary.
        * Auto-map itinerary using using `optimize_waypoints=True` in map call.

## Potential future enhancements

* More Self-guided selection of vacation area
    * Allow multiple parameters to narrow data set down to a reasonable amount.  Probably just ask about rain to start.  Requires subjective binning.
        * Keep running tally of values available for trip planning
    * Auto-map itinerary.
        * Could use criteria to match weather, etc?
    * User will pick starting city once country is chosen and map is selected.
* Add humidity/wind/etc to selection engine?  If that route is taken, encapsulate into function
    * minima/maxima should be determined by actual values in data set
* Bin precipitation by subjective analysis and add to selection engine.
* Save the JSON files to local environment automatically during pull.
    * Explore JSON further for potential enhancements to application.
    * This may be deprioritized for the foreseeable future due to data volume issues and other difficulties storing and identifying data.
* Sort hotels by reviews; add price range.
* Sub-national areas?

## Challenges encountered

* Info boxes are ugly -- currently infoboxes generated by the Google API are not appropriately sized and are far too wide.
* Repeating placenames due to countries - original algo eliminated supposed city duplicates without checking to see if it was a differently named country inside a 
* gmaps incompatibility with jupyter lab.
* Google scraping considerations - Received multiple messages from the google automated fraud detection system that suspected that this project was part of a larger scraping initiative.  Account was briefly suspended.  This forced testing to be a bit more limited in data scope, and prompted explorations on how to sustainably persist the extracted JSON to a flat file, but that effort did not yield any immediate results.
* Unidentified typo in Google Places API generated unexpected JSON results, including basic city data rather than simply hotel data.  Parameter for type of location used `'type' : "logding"`, when the parameter should have been `lodging`.  Google Places api has no notifications for this sort of erroneous parameter, so it went undetected for some time.